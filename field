#include <cstdio>
#include <algorithm>
#include <queue>
#include <vector>

using namespace std;

int mat[501][501];  //	[y좌표][x좌표]
int h, w, k;
int sum, cnt;	

int dir[4][2]={{1,0},{-1,0},{0,1},{0,-1}};  //하 상 우 좌

void dfs(int y, int x){
	for(int i=0;i<4;i++){
		int yy=y+dir[i][0], xx=x+dir[i][1];
		if(yy<0 || yy>=h || xx<0 || xx>=w) continue;
		if(mat[yy][xx]==1){
			mat[yy][xx]=0;
			sum++;
			dfs(yy,xx);
		}
	}
}

int a, b, x, y;
vector <int> v;

int main(){
	scanf("%d %d %d",&h,&w,&k);

	for(int i=0;i<h;i++){
		for(int j=0;j<w;j++){
			mat[i][j]=1;
		}
	}

	for(int l=0;l<k;l++){
		scanf("%d %d %d %d", &a, &b, &x, &y);

		for(int i=b;i<y;i++){
			for(int j=a;j<x;j++){
				mat[i][j]=0;
			}
		}
	}

	for(int i=0;i<h;i++){
		for(int j=0;j<w;j++){
			if(mat[i][j]==1){

				sum=0;
				mat[i][j]=0;
				sum++;
				cnt++;
				dfs(i,j);
				v.push_back(sum);
			}
		}
	}
	sort(v.begin(), v.end());

	printf("%d\n", cnt);
	for(int i=0;i<v.size();i++){
		printf("%d ", v[i]);
	}


	return 0;
}
